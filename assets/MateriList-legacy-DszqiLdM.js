System.register(["./index-legacy-TsQCgnPB.js"],(function(a,e){"use strict";var t,l,n,r,u,i,o,d,s,c,m,b,p,g,f,v,h,y,x,k,_,w,V,C,M,U,S,z,A,E,G,T,q,B,D,j,F;return{setters:[a=>{t=a.A,l=a.r,n=a.o,r=a.a,u=a.w,i=a.u,o=a.Q,d=a.T,s=a.S,c=a.p,m=a.g,b=a.b,p=a.d,g=a.e,f=a.B,v=a.U,h=a.a1,y=a.C,x=a.v,k=a.I,_=a.f,w=a.V,V=a.j,C=a.k,M=a.F,U=a.a2,S=a.a3,z=a.a4,A=a.a5,E=a.a6,G=a.x,T=a.l,q=a.m,B=a.$,D=a.a7,j=a.a8,F=a.a9}],execute:function(){var e=document.createElement("style");e.textContent=".bg-gray-100[data-v-4bfc2045]{background-color:#f6f6f6}.table-container[data-v-4bfc2045]{margin-top:24px;overflow-x:auto}.materi-table[data-v-4bfc2045]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden}.materi-table th[data-v-4bfc2045],.materi-table td[data-v-4bfc2045]{padding:12px;border-bottom:1px solid #eee;text-align:left;font-size:.95rem}.thumb[data-v-4bfc2045]{width:60px;height:auto;border-radius:4px}.form-container[data-v-4bfc2045]{padding:20px}.form-group[data-v-4bfc2045]{margin-bottom:18px}label[data-v-4bfc2045]{display:block;font-weight:600;margin-bottom:6px;color:#333;font-size:.95rem}.custom-input[data-v-4bfc2045]{--background: #f1f1f1;--padding-start: 12px;--padding-end: 12px;--border-radius: 12px;font-size:1rem;border:1px solid #ddd;padding:8px 12px}.submit-button[data-v-4bfc2045],.tambah-button[data-v-4bfc2045]{margin-top:20px;--border-radius: 12px;font-weight:600}\n",document.head.appendChild(e);const I={class:"container"},K={class:"table-container"},L={class:"materi-table"},N=["src"],R={class:"form-container"},H={class:"form-group"},P={class:"form-group"},Q={class:"form-group"};a("default",t({__name:"MateriList",setup(a){const e=l([]),t=l(!1),$=l(!1),J=l(null),O=l(""),W=l(""),X=l({name:"",category:"",rating:"",image:""}),Y=a=>"admin"===W.value||"kontributor"===W.value&&a.createdBy===O.value,Z=async()=>{try{const a=o().currentUser;if($.value&&J.value){const a=s(c,"materi",J.value);await j(a,X.value),alert("Materi berhasil diperbarui!")}else await F(b(c,"materi"),{...X.value,createdBy:a.uid}),alert("Materi berhasil ditambahkan!");X.value={name:"",category:"",rating:"",image:""},$.value=!1,J.value=null,t.value=!1,aa()}catch(a){console.error("Gagal simpan materi:",a)}},aa=async()=>{const a=await m(b(c,"materi"));e.value=a.docs.map((a=>({id:a.id,...a.data()})))};return n((async()=>{await(async()=>{const a=o().currentUser;if(!a)return;O.value=a.uid;const e=await d(s(c,"users",a.uid));e.exists()&&(W.value=e.data().role)})(),await aa()})),(a,l)=>(p(),r(i(q),null,{default:u((()=>[g(i(k),null,{default:u((()=>[g(i(f),{color:"primary"},{default:u((()=>[g(i(v),{slot:"start"},{default:u((()=>[g(i(h),{"default-href":"/"})])),_:1}),g(i(y),null,{default:u((()=>l[7]||(l[7]=[x("Data Materi")]))),_:1})])),_:1})])),_:1}),g(i(T),{class:"ion-padding bg-gray-100"},{default:u((()=>[_("div",I,[g(i(w),{expand:"block",onClick:l[0]||(l[0]=a=>t.value=!0),class:"tambah-button"},{default:u((()=>l[8]||(l[8]=[x(" Tambah Materi ")]))),_:1}),_("div",K,[_("table",L,[l[11]||(l[11]=_("thead",null,[_("tr",null,[_("th",null,"Nama"),_("th",null,"Kategori"),_("th",null,"Rating"),_("th",null,"Gambar"),_("th",null,"Aksi")])],-1)),_("tbody",null,[(p(!0),V(M,null,C(e.value,(a=>(p(),V("tr",{key:a.id},[_("td",null,G(a.name),1),_("td",null,G(a.category),1),_("td",null,G(a.rating),1),_("td",null,[_("img",{src:a.image,class:"thumb"},null,8,N)]),_("td",null,[Y(a)?(p(),r(i(w),{key:0,size:"small",onClick:e=>(a=>{X.value={name:a.name,category:a.category,rating:a.rating,image:a.image},J.value=a.id,$.value=!0,t.value=!0})(a)},{default:u((()=>l[9]||(l[9]=[x("Edit")]))),_:2},1032,["onClick"])):B("",!0),Y(a)?(p(),r(i(w),{key:1,size:"small",color:"danger",onClick:e=>(async a=>{try{const e=s(c,"materi",a);await D(e),alert("Materi berhasil dihapus!"),aa()}catch(e){console.error("Gagal menghapus materi:",e)}})(a.id)},{default:u((()=>l[10]||(l[10]=[x("Hapus")]))),_:2},1032,["onClick"])):B("",!0)])])))),128))])])]),g(i(U),{"is-open":t.value,onDidDismiss:l[6]||(l[6]=a=>t.value=!1)},{default:u((()=>[_("div",R,[_("form",{onSubmit:S(Z,["prevent"])},[_("div",H,[l[12]||(l[12]=_("label",null,"Nama Materi",-1)),g(i(z),{modelValue:X.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>X.value.name=a),required:"",class:"custom-input"},null,8,["modelValue"])]),g(i(A),{modelValue:X.value.category,"onUpdate:modelValue":l[2]||(l[2]=a=>X.value.category=a),interface:"popover",placeholder:"Pilih Kategori",class:"custom-input"},{default:u((()=>[g(i(E),{value:"Science"},{default:u((()=>l[13]||(l[13]=[x("Science")]))),_:1}),g(i(E),{value:"Technology"},{default:u((()=>l[14]||(l[14]=[x("Technology")]))),_:1}),g(i(E),{value:"Engineering"},{default:u((()=>l[15]||(l[15]=[x("Engineering")]))),_:1}),g(i(E),{value:"Arts"},{default:u((()=>l[16]||(l[16]=[x("Arts")]))),_:1}),g(i(E),{value:"Mathematics"},{default:u((()=>l[17]||(l[17]=[x("Mathematics")]))),_:1})])),_:1},8,["modelValue"]),_("div",P,[l[18]||(l[18]=_("label",null,"Rating",-1)),g(i(z),{modelValue:X.value.rating,"onUpdate:modelValue":l[3]||(l[3]=a=>X.value.rating=a),type:"number",step:"0.1",min:"0",max:"5",required:"",class:"custom-input"},null,8,["modelValue"])]),_("div",Q,[l[19]||(l[19]=_("label",null,"Link Gambar",-1)),g(i(z),{modelValue:X.value.image,"onUpdate:modelValue":l[4]||(l[4]=a=>X.value.image=a),required:"",class:"custom-input"},null,8,["modelValue"])]),g(i(w),{expand:"block",type:"submit",class:"submit-button"},{default:u((()=>[x(G($.value?"Update Materi":"Simpan ke Firebase"),1)])),_:1}),g(i(w),{expand:"block",color:"danger",type:"button",class:"submit-button",onClick:l[5]||(l[5]=a=>t.value=!1)},{default:u((()=>l[20]||(l[20]=[x(" Close ")]))),_:1})],32)])])),_:1},8,["is-open"])])])),_:1})])),_:1}))}},[["__scopeId","data-v-4bfc2045"]]))}}}));
