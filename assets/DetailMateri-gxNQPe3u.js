import{A as C,r as g,o as O,a as k,w as l,u as e,d as i,e as o,j as c,al as j,f as t,y as d,am as N,x as u,W as f,v as m,an as w,Y as S,z as V,ao as A,ap as P,aq as $,F as q,k as z,ar as I,l as E,m as R,as as F,ag as G,ah as H,b as U,p as D,g as Y,T as K,U as Q,at as W,L as J,au as X,N as Z,av as aa,Q as ea,a0 as M,aw as ta}from"./index-BTBI6rXG.js";const oa={key:0,class:"loading-container"},na={key:1,class:"error-container ion-padding"},sa={key:2},la={class:"header-overlay"},ia={class:"materi-title"},ra={class:"meta-badges"},ca={class:"content-container"},da={class:"section"},ua={class:"section-header"},ma={key:0},_a={class:"accordion-content",slot:"content"},va={class:"author-info"},ha=["src"],ga={class:"author-name"},fa={key:0,class:"publish-date"},pa={key:0,class:"video-section"},ya={class:"video-container"},ba=["src"],ka=["innerHTML"],wa={key:1,class:"empty-content"},Ia={key:3,class:"empty-state ion-padding"},Da={__name:"DetailMateri",setup(Ma){const L=F(),r=g(null),v=g([]),_=g(null),p=async n=>{const a=G(U(D,"materi_isi"),H("materi_id","==",n)),s=await Y(a);v.value=s.docs.map(h=>{var b;return{id:h.id,...h.data(),created_at:((b=h.data().created_at)==null?void 0:b.toDate())||new Date}})},x=async n=>{const a=K(D,"materi",n),s=await Q(a);return s.exists()?{id:s.id,...s.data()}:null},B=n=>{if(!n)return"";try{const a=new URL(n);return a.hostname.includes("youtube.com")&&a.searchParams.get("v")?"https://www.youtube.com/embed/".concat(a.searchParams.get("v"),"?rel=0&modestbranding=1"):a.hostname.includes("youtu.be")?"https://www.youtube.com/embed/".concat(a.pathname.slice(1),"?rel=0&modestbranding=1"):n}catch(a){return n}},T=n=>n?n.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"",y=async()=>{try{if(_.value=null,history.state.materi)r.value=history.state.materi,await p(r.value.id);else{const n=L.params.id,a=await x(n);a&&(r.value=a,await p(n))}}catch(n){console.error("Error loading materi:",n),_.value=n.message||"Terjadi kesalahan saat memuat materi"}};return O(async()=>{await y()}),(n,a)=>(i(),k(e(R),null,{default:l(()=>[o(e(E),{class:"materi-content"},{default:l(()=>[!r.value&&!_.value?(i(),c("div",oa,[o(e(j),{name:"crescent",color:"primary"}),a[1]||(a[1]=t("p",null,"Memuat materi...",-1))])):_.value?(i(),c("div",na,[o(e(d),{icon:e(N),color:"danger",class:"error-icon"},null,8,["icon"]),a[3]||(a[3]=t("h3",null,"Gagal memuat materi",-1)),t("p",null,u(_.value),1),o(e(f),{onClick:y,fill:"outline"},{default:l(()=>a[2]||(a[2]=[m("Coba Lagi")])),_:1})])):r.value?(i(),c("div",sa,[t("div",{class:"hero-header",style:A({backgroundImage:"linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url("+r.value.image+")"})},[t("div",la,[t("h1",ia,u(r.value.name),1),t("div",ra,[o(e(w),{color:"light",class:"meta-badge"},{default:l(()=>[o(e(d),{icon:e(S),slot:"start"},null,8,["icon"]),m(" "+u(r.value.category),1)]),_:1}),o(e(w),{color:"warning",class:"meta-badge"},{default:l(()=>[o(e(d),{icon:e(V),slot:"start"},null,8,["icon"]),m(" "+u(r.value.rating),1)]),_:1})])])],4),t("div",ca,[t("div",da,[t("div",ua,[o(e(d),{icon:e(P),color:"primary"},null,8,["icon"]),a[4]||(a[4]=t("h2",null,"Daftar Materi",-1))]),v.value.length>0?(i(),c("div",ma,[o(e($),{class:"custom-accordion"},{default:l(()=>[(i(!0),c(q,null,z(v.value,s=>(i(),k(e(W),{key:s.id,value:s.id},{default:l(()=>[o(e(J),{slot:"header",class:"accordion-header"},{default:l(()=>[o(e(d),{icon:e(X),slot:"start",color:"medium"},null,8,["icon"]),o(e(Z),null,{default:l(()=>[m(u(s.judul),1)]),_:2},1024),o(e(d),{icon:e(aa),slot:"end",class:"accordion-icon"},null,8,["icon"])]),_:2},1024),t("div",_a,[t("div",va,[o(e(ea),{class:"author-avatar"},{default:l(()=>[t("img",{src:s.user_photo||"https://ionicframework.com/docs/img/demos/avatar.svg"},null,8,ha)]),_:2},1024),t("div",null,[t("p",ga,u(s.user_fullname),1),s.created_at?(i(),c("p",fa,"Dipublikasikan "+u(T(s.created_at)),1)):M("",!0)])]),s.link_video?(i(),c("div",pa,[t("div",ya,[t("iframe",{src:B(s.link_video),frameborder:"0",allowfullscreen:"",title:"Video Pembelajaran"},null,8,ba)]),o(e(f),{href:s.link_video,target:"_blank",fill:"clear",size:"small",class:"watch-button"},{default:l(()=>[o(e(d),{icon:e(ta),slot:"start"},null,8,["icon"]),a[5]||(a[5]=m(" Tonton di YouTube "))]),_:2},1032,["href"])])):M("",!0),t("div",{class:"materi-text",innerHTML:s.isi},null,8,ka)])]),_:2},1032,["value"]))),128))]),_:1})])):(i(),c("div",wa,[o(e(d),{icon:e(I),color:"medium"},null,8,["icon"]),a[6]||(a[6]=t("p",null,"Belum ada konten materi",-1))]))])])])):(i(),c("div",Ia,[o(e(d),{icon:e(I),color:"medium",class:"empty-icon"},null,8,["icon"]),a[8]||(a[8]=t("h3",null,"Materi tidak ditemukan",-1)),o(e(f),{onClick:a[0]||(a[0]=s=>n.$router.go(-1)),fill:"outline"},{default:l(()=>a[7]||(a[7]=[m("Kembali")])),_:1})]))]),_:1})]),_:1}))}},xa=C(Da,[["__scopeId","data-v-aea63925"]]);export{xa as default};
