import{A as x,r as m,o as C,a as k,w as n,u as s,g as P,b as B,d as p,e as o,B as D,U as _,a1 as M,C as T,v as i,I as q,f as a,V as f,j as y,k as $,F as S,a2 as j,a3 as A,a4 as v,ah as E,x as c,$ as F,l as L,m as G,p as g,ai as H,aj as K,S as V,a7 as z}from"./index-CygpMYFm.js";const R={class:"container"},Y={class:"table-container"},J={class:"materi-table"},O={class:"form-container"},Q={class:"form-group"},W={class:"form-group"},X={class:"form-group"},Z={class:"form-group"},h={class:"ion-text-center"},ee={__name:"UserPage",setup(ae){const w=m([]),d=m(!1),u=m(""),t=m({fullName:"",email:"",password:"",confirmPassword:""}),U=()=>{t.value={fullName:"",email:"",password:"",confirmPassword:""},u.value=""},I=async()=>{if(u.value="",t.value.password!==t.value.confirmPassword){u.value="Password tidak cocok";return}try{const e=(await H(t.value.email,t.value.password)).user;await K(V(g,"users",e.uid),{fullName:t.value.fullName,email:t.value.email,role:"kontributor",createdAt:new Date}),alert("User berhasil ditambahkan"),U(),d.value=!1,b()}catch(r){u.value=r.message||"Gagal menambahkan user"}},b=async()=>{const r=await P(B(g,"users"));w.value=r.docs.map(e=>({id:e.id,...e.data()}))},N=async r=>{if(confirm("Yakin ingin menghapus user ini?"))try{await z(V(g,"users",r)),alert("User berhasil dihapus"),b()}catch(l){alert("Gagal menghapus user"),console.error(l)}};return C(b),(r,e)=>(p(),k(s(G),null,{default:n(()=>[o(s(q),null,{default:n(()=>[o(s(D),{color:"primary"},{default:n(()=>[o(s(_),{slot:"start"},{default:n(()=>[o(s(M),{"default-href":"/"})]),_:1}),o(s(T),null,{default:n(()=>e[7]||(e[7]=[i("Manajemen User")])),_:1})]),_:1})]),_:1}),o(s(L),{class:"ion-padding bg-gray-100"},{default:n(()=>[a("div",R,[o(s(f),{expand:"block",onClick:e[0]||(e[0]=l=>d.value=!0),class:"tambah-button"},{default:n(()=>e[8]||(e[8]=[i(" Tambah User Kontributor ")])),_:1}),a("div",Y,[a("table",J,[e[10]||(e[10]=a("thead",null,[a("tr",null,[a("th",null,"Nama"),a("th",null,"Email"),a("th",null,"Role"),a("th",null,"Aksi")])],-1)),a("tbody",null,[(p(!0),y(S,null,$(w.value,l=>(p(),y("tr",{key:l.id},[a("td",null,c(l.fullName),1),a("td",null,c(l.email),1),a("td",null,c(l.role),1),a("td",null,[o(s(f),{color:"danger",size:"small",onClick:le=>N(l.id)},{default:n(()=>e[9]||(e[9]=[i(" Hapus ")])),_:2},1032,["onClick"])])]))),128))])])]),o(s(j),{"is-open":d.value,onDidDismiss:e[6]||(e[6]=l=>d.value=!1)},{default:n(()=>[a("div",O,[a("form",{onSubmit:A(I,["prevent"])},[a("div",Q,[e[11]||(e[11]=a("label",null,"Nama Lengkap",-1)),o(s(v),{modelValue:t.value.fullName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.fullName=l),required:"",class:"custom-input"},null,8,["modelValue"])]),a("div",W,[e[12]||(e[12]=a("label",null,"Email",-1)),o(s(v),{modelValue:t.value.email,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.email=l),type:"email",required:"",class:"custom-input"},null,8,["modelValue"])]),a("div",X,[e[13]||(e[13]=a("label",null,"Password",-1)),o(s(v),{modelValue:t.value.password,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.password=l),type:"password",required:"",class:"custom-input"},null,8,["modelValue"])]),a("div",Z,[e[14]||(e[14]=a("label",null,"Konfirmasi Password",-1)),o(s(v),{modelValue:t.value.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.confirmPassword=l),type:"password",required:"",class:"custom-input"},null,8,["modelValue"])]),o(s(f),{expand:"block",type:"submit",class:"submit-button"},{default:n(()=>e[15]||(e[15]=[i(" Tambah User ")])),_:1}),o(s(f),{expand:"block",color:"danger",type:"button",class:"submit-button",onClick:e[5]||(e[5]=l=>d.value=!1)},{default:n(()=>e[16]||(e[16]=[i(" Close ")])),_:1}),u.value?(p(),k(s(E),{key:0,color:"danger"},{default:n(()=>[a("p",h,c(u.value),1)]),_:1})):F("",!0)],32)])]),_:1},8,["is-open"])])]),_:1})]),_:1}))}},te=x(ee,[["__scopeId","data-v-c6156f0d"]]);export{te as default};
