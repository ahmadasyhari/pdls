System.register(["./index-legacy-Cb3B5jNa.js"],(function(a,e){"use strict";var t,l,u,n,r,i,o,d,s,c,m,f,p,g,v,b,h,y,x,k,_,V,w,C,M,U,S,z,q,A,E,G,T,j,B,D,F;return{setters:[a=>{t=a.A,l=a.r,u=a.o,n=a.a,r=a.w,i=a.u,o=a.Q,d=a.T,s=a.S,c=a.p,m=a.g,f=a.b,p=a.d,g=a.e,v=a.B,b=a.U,h=a.a2,y=a.C,x=a.v,k=a.I,_=a.f,V=a.V,w=a.j,C=a.k,M=a.F,U=a.a3,S=a.a4,z=a.a5,q=a.a6,A=a.a7,E=a.x,G=a.l,T=a.m,j=a.$,B=a.a8,D=a.a9,F=a.aa}],execute:function(){var e=document.createElement("style");e.textContent=".bg-gray-100[data-v-e92f08cf]{background-color:#f6f6f6}.table-container[data-v-e92f08cf]{margin-top:24px;overflow-x:auto}.materi-table[data-v-e92f08cf]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden}.materi-table th[data-v-e92f08cf],.materi-table td[data-v-e92f08cf]{padding:12px;border-bottom:1px solid #eee;text-align:left;font-size:.95rem}.thumb[data-v-e92f08cf]{width:60px;height:auto;border-radius:4px}.form-container[data-v-e92f08cf]{padding:20px}.form-group[data-v-e92f08cf]{margin-bottom:18px}label[data-v-e92f08cf]{display:block;font-weight:600;margin-bottom:6px;color:#333;font-size:.95rem}.custom-input[data-v-e92f08cf]{--background: #f1f1f1;--padding-start: 12px;--padding-end: 12px;--border-radius: 12px;font-size:1rem;border:1px solid #ddd;padding:8px 12px}.submit-button[data-v-e92f08cf],.tambah-button[data-v-e92f08cf]{margin-top:20px;--border-radius: 12px;font-weight:600}\n",document.head.appendChild(e);const I={class:"container"},K={class:"table-container"},L={class:"materi-table"},N=["src"],P={class:"form-container"},R={class:"form-group"},W={class:"form-group"},H={class:"form-group"},Q={class:"form-group"};a("default",t({__name:"MateriList",setup(a){const e=l([]),t=l(!1),$=l(!1),J=l(null),O=l(""),X=l(""),Y=l({name:"",category:"",rating:"",duration:"",image:""}),Z=a=>"admin"===X.value||"kontributor"===X.value&&a.createdBy===O.value,aa=async()=>{try{const a=o().currentUser;if($.value&&J.value){const a=s(c,"materi",J.value);await D(a,Y.value),alert("Materi berhasil diperbarui!")}else await F(f(c,"materi"),{...Y.value,createdBy:a.uid}),alert("Materi berhasil ditambahkan!");Y.value={name:"",category:"",rating:"",duration:"",image:""},$.value=!1,J.value=null,t.value=!1,ea()}catch(a){console.error("Gagal simpan materi:",a)}},ea=async()=>{const a=await m(f(c,"materi"));e.value=a.docs.map((a=>({id:a.id,...a.data()})))};return u((async()=>{await(async()=>{const a=o().currentUser;if(!a)return;O.value=a.uid;const e=await d(s(c,"users",a.uid));e.exists()&&(X.value=e.data().role)})(),await ea()})),(a,l)=>(p(),n(i(T),null,{default:r((()=>[g(i(k),null,{default:r((()=>[g(i(v),{color:"primary"},{default:r((()=>[g(i(b),{slot:"start"},{default:r((()=>[g(i(h),{"default-href":"/"})])),_:1}),g(i(y),null,{default:r((()=>l[8]||(l[8]=[x("Data Materi")]))),_:1})])),_:1})])),_:1}),g(i(G),{class:"ion-padding bg-gray-100"},{default:r((()=>[_("div",I,[g(i(V),{expand:"block",onClick:l[0]||(l[0]=a=>t.value=!0),class:"tambah-button"},{default:r((()=>l[9]||(l[9]=[x(" Tambah Materi ")]))),_:1}),_("div",K,[_("table",L,[l[12]||(l[12]=_("thead",null,[_("tr",null,[_("th",null,"Nama"),_("th",null,"Kategori"),_("th",null,"Rating"),_("th",null,"Waktu"),_("th",null,"Gambar"),_("th",null,"Aksi")])],-1)),_("tbody",null,[(p(!0),w(M,null,C(e.value,(a=>(p(),w("tr",{key:a.id},[_("td",null,E(a.name),1),_("td",null,E(a.category),1),_("td",null,E(a.rating),1),_("td",null,E(a.duration)+" menit",1),_("td",null,[_("img",{src:a.image,class:"thumb"},null,8,N)]),_("td",null,[Z(a)?(p(),n(i(V),{key:0,size:"small",onClick:e=>(a=>{Y.value={name:a.name,category:a.category,rating:a.rating,duration:a.duration,image:a.image},J.value=a.id,$.value=!0,t.value=!0})(a)},{default:r((()=>l[10]||(l[10]=[x("Edit")]))),_:2},1032,["onClick"])):j("",!0),Z(a)?(p(),n(i(V),{key:1,size:"small",color:"danger",onClick:e=>(async a=>{try{const e=s(c,"materi",a);await B(e),alert("Materi berhasil dihapus!"),ea()}catch(e){console.error("Gagal menghapus materi:",e)}})(a.id)},{default:r((()=>l[11]||(l[11]=[x("Hapus")]))),_:2},1032,["onClick"])):j("",!0)])])))),128))])])]),g(i(U),{"is-open":t.value,onDidDismiss:l[7]||(l[7]=a=>t.value=!1)},{default:r((()=>[_("div",P,[_("form",{onSubmit:S(aa,["prevent"])},[_("div",R,[l[13]||(l[13]=_("label",null,"Nama Materi",-1)),g(i(z),{modelValue:Y.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>Y.value.name=a),required:"",class:"custom-input"},null,8,["modelValue"])]),g(i(q),{modelValue:Y.value.category,"onUpdate:modelValue":l[2]||(l[2]=a=>Y.value.category=a),interface:"popover",placeholder:"Pilih Kategori",class:"custom-input"},{default:r((()=>[g(i(A),{value:"Science"},{default:r((()=>l[14]||(l[14]=[x("Science")]))),_:1}),g(i(A),{value:"Technology"},{default:r((()=>l[15]||(l[15]=[x("Technology")]))),_:1}),g(i(A),{value:"Engineering"},{default:r((()=>l[16]||(l[16]=[x("Engineering")]))),_:1}),g(i(A),{value:"Arts"},{default:r((()=>l[17]||(l[17]=[x("Arts")]))),_:1}),g(i(A),{value:"Mathematics"},{default:r((()=>l[18]||(l[18]=[x("Mathematics")]))),_:1})])),_:1},8,["modelValue"]),_("div",W,[l[19]||(l[19]=_("label",null,"Rating",-1)),g(i(z),{modelValue:Y.value.rating,"onUpdate:modelValue":l[3]||(l[3]=a=>Y.value.rating=a),type:"number",step:"0.1",min:"0",max:"5",required:"",class:"custom-input"},null,8,["modelValue"])]),_("div",H,[l[20]||(l[20]=_("label",null,"Waktu Pengerjaan (menit)",-1)),g(i(z),{modelValue:Y.value.duration,"onUpdate:modelValue":l[4]||(l[4]=a=>Y.value.duration=a),type:"number",min:"1",required:"",class:"custom-input"},null,8,["modelValue"])]),_("div",Q,[l[21]||(l[21]=_("label",null,"Link Gambar",-1)),g(i(z),{modelValue:Y.value.image,"onUpdate:modelValue":l[5]||(l[5]=a=>Y.value.image=a),required:"",class:"custom-input"},null,8,["modelValue"])]),g(i(V),{expand:"block",type:"submit",class:"submit-button"},{default:r((()=>[x(E($.value?"Update Materi":"Simpan ke Firebase"),1)])),_:1}),g(i(V),{expand:"block",color:"danger",type:"button",class:"submit-button",onClick:l[6]||(l[6]=a=>t.value=!1)},{default:r((()=>l[22]||(l[22]=[x(" Close ")]))),_:1})],32)])])),_:1},8,["is-open"])])])),_:1})])),_:1}))}},[["__scopeId","data-v-e92f08cf"]]))}}}));
