System.register(["./index-legacy-PH7pY8-A.js"],(function(a,e){"use strict";var t,l,u,i,n,r,o,d,s,c,m,p,v,g,b,f,h,k,y,x,_,w,V,C,M,U,S,T,z,G,q,B,D,R,j,A,E;return{setters:[a=>{t=a.A,l=a.r,u=a.o,i=a.a,n=a.w,r=a.u,o=a.R,d=a.U,s=a.T,c=a.p,m=a.g,p=a.b,v=a.d,g=a.e,b=a.B,f=a.V,h=a.a2,k=a.C,y=a.v,x=a.I,_=a.f,w=a.W,V=a.j,C=a.k,M=a.F,U=a.a3,S=a.a4,T=a.a5,z=a.a6,G=a.a7,q=a.x,B=a.l,D=a.m,R=a.a0,j=a.a8,A=a.a9,E=a.aa}],execute:function(){var e=document.createElement("style");e.textContent=".bg-gray-100[data-v-c7622306]{background-color:#f6f6f6}.table-container[data-v-c7622306]{margin-top:24px;overflow-x:auto}.materi-table[data-v-c7622306]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden}.materi-table th[data-v-c7622306],.materi-table td[data-v-c7622306]{padding:12px;border-bottom:1px solid #eee;text-align:left;font-size:.95rem}.thumb[data-v-c7622306]{width:60px;height:auto;border-radius:4px}.form-container[data-v-c7622306]{padding:20px}.form-group[data-v-c7622306]{margin-bottom:18px}label[data-v-c7622306]{display:block;font-weight:600;margin-bottom:6px;color:#333;font-size:.95rem}.custom-input[data-v-c7622306]{--background: #f1f1f1;--padding-start: 12px;--padding-end: 12px;--border-radius: 12px;font-size:1rem;border:1px solid #ddd;padding:8px 12px}.submit-button[data-v-c7622306],.tambah-button[data-v-c7622306]{margin-top:20px;--border-radius: 12px;font-weight:600}\n",document.head.appendChild(e);const F={class:"container"},I={class:"table-container"},K={class:"materi-table"},L=["src"],N={class:"form-container"},H={class:"form-group"},P={class:"form-group"},W={class:"form-group"};a("default",t({__name:"MateriList",setup(a){const e=l([]),t=l(!1),J=l(!1),O=l(null),Q=l(""),X=l(""),Y=l({name:"",category:"",rating:"",image:""}),Z=a=>"admin"===X.value||"kontributor"===X.value&&a.createdBy===Q.value,$=async()=>{try{const a=o().currentUser;if(J.value&&O.value){const a=s(c,"materi",O.value);await A(a,Y.value),alert("Materi berhasil diperbarui!")}else await E(p(c,"materi"),{...Y.value,createdBy:a.uid}),alert("Materi berhasil ditambahkan!");Y.value={name:"",category:"",rating:"",image:""},J.value=!1,O.value=null,t.value=!1,aa()}catch(a){console.error("Gagal simpan materi:",a)}},aa=async()=>{const a=await m(p(c,"materi"));e.value=a.docs.map((a=>({id:a.id,...a.data()})))};return u((async()=>{await(async()=>{const a=o().currentUser;if(!a)return;Q.value=a.uid;const e=await d(s(c,"users",a.uid));e.exists()&&(X.value=e.data().role)})(),await aa()})),(a,l)=>(v(),i(r(D),null,{default:n((()=>[g(r(x),null,{default:n((()=>[g(r(b),{color:"primary"},{default:n((()=>[g(r(f),{slot:"start"},{default:n((()=>[g(r(h),{"default-href":"/"})])),_:1}),g(r(k),null,{default:n((()=>l[7]||(l[7]=[y("Data Materi")]))),_:1})])),_:1})])),_:1}),g(r(B),{class:"ion-padding bg-gray-100"},{default:n((()=>[_("div",F,[g(r(w),{expand:"block",onClick:l[0]||(l[0]=a=>t.value=!0),class:"tambah-button"},{default:n((()=>l[8]||(l[8]=[y(" Tambah Materi ")]))),_:1}),_("div",I,[_("table",K,[l[11]||(l[11]=_("thead",null,[_("tr",null,[_("th",null,"Nama"),_("th",null,"Kategori"),_("th",null,"Rating"),_("th",null,"Gambar"),_("th",null,"Aksi")])],-1)),_("tbody",null,[(v(!0),V(M,null,C(e.value,(a=>(v(),V("tr",{key:a.id},[_("td",null,q(a.name),1),_("td",null,q(a.category),1),_("td",null,q(a.rating),1),_("td",null,[_("img",{src:a.image,class:"thumb"},null,8,L)]),_("td",null,[Z(a)?(v(),i(r(w),{key:0,size:"small",onClick:e=>(a=>{Y.value={name:a.name,category:a.category,rating:a.rating,image:a.image},O.value=a.id,J.value=!0,t.value=!0})(a)},{default:n((()=>l[9]||(l[9]=[y("Edit")]))),_:2},1032,["onClick"])):R("",!0),Z(a)?(v(),i(r(w),{key:1,size:"small",color:"danger",onClick:e=>(async a=>{try{const e=s(c,"materi",a);await j(e),alert("Materi berhasil dihapus!"),aa()}catch(e){console.error("Gagal menghapus materi:",e)}})(a.id)},{default:n((()=>l[10]||(l[10]=[y("Hapus")]))),_:2},1032,["onClick"])):R("",!0)])])))),128))])])]),g(r(U),{"is-open":t.value,onDidDismiss:l[6]||(l[6]=a=>t.value=!1)},{default:n((()=>[_("div",N,[_("form",{onSubmit:S($,["prevent"])},[_("div",H,[l[12]||(l[12]=_("label",null,"Nama Materi",-1)),g(r(T),{modelValue:Y.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>Y.value.name=a),required:"",class:"custom-input"},null,8,["modelValue"])]),g(r(z),{modelValue:Y.value.category,"onUpdate:modelValue":l[2]||(l[2]=a=>Y.value.category=a),interface:"popover",placeholder:"Pilih Kategori",class:"custom-input"},{default:n((()=>[g(r(G),{value:"Sains"},{default:n((()=>l[13]||(l[13]=[y("Sains")]))),_:1}),g(r(G),{value:"Teknologi"},{default:n((()=>l[14]||(l[14]=[y("Teknologi")]))),_:1}),g(r(G),{value:"Teknik"},{default:n((()=>l[15]||(l[15]=[y("Teknik")]))),_:1}),g(r(G),{value:"Seni"},{default:n((()=>l[16]||(l[16]=[y("Seni")]))),_:1}),g(r(G),{value:"Matematika"},{default:n((()=>l[17]||(l[17]=[y("Matematika")]))),_:1})])),_:1},8,["modelValue"]),_("div",P,[l[18]||(l[18]=_("label",null,"Rating",-1)),g(r(T),{modelValue:Y.value.rating,"onUpdate:modelValue":l[3]||(l[3]=a=>Y.value.rating=a),type:"number",step:"0.1",min:"0",max:"5",required:"",class:"custom-input"},null,8,["modelValue"])]),_("div",W,[l[19]||(l[19]=_("label",null,"Link Gambar",-1)),g(r(T),{modelValue:Y.value.image,"onUpdate:modelValue":l[4]||(l[4]=a=>Y.value.image=a),required:"",class:"custom-input"},null,8,["modelValue"])]),g(r(w),{expand:"block",type:"submit",class:"submit-button"},{default:n((()=>[y(q(J.value?"Update Materi":"Simpan ke Firebase"),1)])),_:1}),g(r(w),{expand:"block",color:"danger",type:"button",class:"submit-button",onClick:l[5]||(l[5]=a=>t.value=!1)},{default:n((()=>l[20]||(l[20]=[y(" Close ")]))),_:1})],32)])])),_:1},8,["is-open"])])])),_:1})])),_:1}))}},[["__scopeId","data-v-c7622306"]]))}}}));
