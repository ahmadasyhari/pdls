import{_ as O,r as f,o as T,a as b,w as l,u as e,d as i,e as o,j as c,ac as j,f as t,x as d,ad as P,v as u,R as g,t as m,ae as w,P as S,y as V,af as N,ag as R,ah as $,F as A,k as E,ai as I,l as q,m as z,aj as F,a6 as G,a7 as H,b as J,p as D,g as K,W as U,aa as W,ak as Y,J as Q,al as X,L as Z,am as aa,O as ea,a4 as M,an as ta}from"./index-B2xrrNZF.js";const oa={key:0,class:"loading-container"},na={key:1,class:"error-container ion-padding"},sa={key:2},la={class:"header-overlay"},ia={class:"materi-title"},ra={class:"meta-badges"},ca={class:"content-container"},da={class:"section"},ua={class:"section-header"},ma={key:0},_a={class:"accordion-content",slot:"content"},va={class:"author-info"},ha=["src"],fa={class:"author-name"},ga={key:0,class:"publish-date"},ya={key:0,class:"video-section"},pa={class:"video-container"},ka=["src"],ba=["innerHTML"],wa={key:1,class:"empty-content"},Ia={key:3,class:"empty-state ion-padding"},Da={__name:"DetailMateri",setup(Ma){const L=F(),r=f(null),v=f([]),_=f(null),y=async n=>{const a=G(J(D,"materi_isi"),H("materi_id","==",n)),s=await K(a);v.value=s.docs.map(h=>{var k;return{id:h.id,...h.data(),created_at:((k=h.data().created_at)==null?void 0:k.toDate())||new Date}})},x=async n=>{const a=U(D,"materi",n),s=await W(a);return s.exists()?{id:s.id,...s.data()}:null},B=n=>{if(!n)return"";try{const a=new URL(n);return a.hostname.includes("youtube.com")&&a.searchParams.get("v")?"https://www.youtube.com/embed/".concat(a.searchParams.get("v"),"?rel=0&modestbranding=1"):a.hostname.includes("youtu.be")?"https://www.youtube.com/embed/".concat(a.pathname.slice(1),"?rel=0&modestbranding=1"):n}catch(a){return n}},C=n=>n?n.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"",p=async()=>{try{if(_.value=null,history.state.materi)r.value=history.state.materi,await y(r.value.id);else{const n=L.params.id,a=await x(n);a&&(r.value=a,await y(n))}}catch(n){console.error("Error loading materi:",n),_.value=n.message||"Terjadi kesalahan saat memuat materi"}};return T(async()=>{await p()}),(n,a)=>(i(),b(e(z),null,{default:l(()=>[o(e(q),{class:"materi-content"},{default:l(()=>[!r.value&&!_.value?(i(),c("div",oa,[o(e(j),{name:"crescent",color:"primary"}),a[1]||(a[1]=t("p",null,"Memuat materi...",-1))])):_.value?(i(),c("div",na,[o(e(d),{icon:e(P),color:"danger",class:"error-icon"},null,8,["icon"]),a[3]||(a[3]=t("h3",null,"Gagal memuat materi",-1)),t("p",null,u(_.value),1),o(e(g),{onClick:p,fill:"outline"},{default:l(()=>a[2]||(a[2]=[m("Coba Lagi")])),_:1})])):r.value?(i(),c("div",sa,[t("div",{class:"hero-header",style:N({backgroundImage:"linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url("+r.value.image+")"})},[t("div",la,[t("h1",ia,u(r.value.name),1),t("div",ra,[o(e(w),{color:"light",class:"meta-badge"},{default:l(()=>[o(e(d),{icon:e(S),slot:"start"},null,8,["icon"]),m(" "+u(r.value.category),1)]),_:1}),o(e(w),{color:"warning",class:"meta-badge"},{default:l(()=>[o(e(d),{icon:e(V),slot:"start"},null,8,["icon"]),m(" "+u(r.value.rating),1)]),_:1})])])],4),t("div",ca,[t("div",da,[t("div",ua,[o(e(d),{icon:e(R),color:"primary"},null,8,["icon"]),a[4]||(a[4]=t("h2",null,"Daftar Materi",-1))]),v.value.length>0?(i(),c("div",ma,[o(e($),{class:"custom-accordion"},{default:l(()=>[(i(!0),c(A,null,E(v.value,s=>(i(),b(e(Y),{key:s.id,value:s.id},{default:l(()=>[o(e(Q),{slot:"header",class:"accordion-header"},{default:l(()=>[o(e(d),{icon:e(X),slot:"start",color:"medium"},null,8,["icon"]),o(e(Z),null,{default:l(()=>[m(u(s.judul),1)]),_:2},1024),o(e(d),{icon:e(aa),slot:"end",class:"accordion-icon"},null,8,["icon"])]),_:2},1024),t("div",_a,[t("div",va,[o(e(ea),{class:"author-avatar"},{default:l(()=>[t("img",{src:s.user_photo||"https://ionicframework.com/docs/img/demos/avatar.svg"},null,8,ha)]),_:2},1024),t("div",null,[t("p",fa,u(s.user_fullname),1),s.created_at?(i(),c("p",ga,"Dipublikasikan "+u(C(s.created_at)),1)):M("",!0)])]),s.link_video?(i(),c("div",ya,[t("div",pa,[t("iframe",{src:B(s.link_video),frameborder:"0",allowfullscreen:"",title:"Video Pembelajaran"},null,8,ka)]),o(e(g),{href:s.link_video,target:"_blank",fill:"clear",size:"small",class:"watch-button"},{default:l(()=>[o(e(d),{icon:e(ta),slot:"start"},null,8,["icon"]),a[5]||(a[5]=m(" Tonton di YouTube "))]),_:2},1032,["href"])])):M("",!0),t("div",{class:"materi-text",innerHTML:s.isi},null,8,ba)])]),_:2},1032,["value"]))),128))]),_:1})])):(i(),c("div",wa,[o(e(d),{icon:e(I),color:"medium"},null,8,["icon"]),a[6]||(a[6]=t("p",null,"Belum ada konten materi",-1))]))])])])):(i(),c("div",Ia,[o(e(d),{icon:e(I),color:"medium",class:"empty-icon"},null,8,["icon"]),a[8]||(a[8]=t("h3",null,"Materi tidak ditemukan",-1)),o(e(g),{onClick:a[0]||(a[0]=s=>n.$router.go(-1)),fill:"outline"},{default:l(()=>a[7]||(a[7]=[m("Kembali")])),_:1})]))]),_:1})]),_:1}))}},xa=O(Da,[["__scopeId","data-v-aea63925"]]);export{xa as default};
