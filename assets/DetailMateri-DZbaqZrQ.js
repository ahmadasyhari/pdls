import{A as C,r as f,o as j,a as b,w as l,u as e,d as i,e as o,j as c,al as O,f as t,y as d,am as P,x as u,V as g,v as m,an as w,X as S,ao as V,ap as $,aq as A,ar as N,F as q,k as E,as as I,l as R,m as z,at as F,ag as G,ah as H,b as K,p as D,g as U,S as W,T as X,au as Y,K as J,av as Q,M as Z,aw as aa,P as ea,$ as M,ax as ta}from"./index-CmKQmBsg.js";const oa={key:0,class:"loading-container"},na={key:1,class:"error-container ion-padding"},sa={key:2},la={class:"header-overlay"},ia={class:"materi-title"},ra={class:"meta-badges"},ca={class:"content-container"},da={class:"section"},ua={class:"section-header"},ma={key:0},_a={class:"accordion-content",slot:"content"},va={class:"author-info"},ha=["src"],fa={class:"author-name"},ga={key:0,class:"publish-date"},pa={key:0,class:"video-section"},ya={class:"video-container"},ka=["src"],ba=["innerHTML"],wa={key:1,class:"empty-content"},Ia={key:3,class:"empty-state ion-padding"},Da={__name:"DetailMateri",setup(Ma){const x=F(),r=f(null),v=f([]),_=f(null),p=async n=>{const a=G(K(D,"materi_isi"),H("materi_id","==",n)),s=await U(a);v.value=s.docs.map(h=>{var k;return{id:h.id,...h.data(),created_at:((k=h.data().created_at)==null?void 0:k.toDate())||new Date}})},L=async n=>{const a=W(D,"materi",n),s=await X(a);return s.exists()?{id:s.id,...s.data()}:null},B=n=>{if(!n)return"";try{const a=new URL(n);return a.hostname.includes("youtube.com")&&a.searchParams.get("v")?"https://www.youtube.com/embed/".concat(a.searchParams.get("v"),"?rel=0&modestbranding=1"):a.hostname.includes("youtu.be")?"https://www.youtube.com/embed/".concat(a.pathname.slice(1),"?rel=0&modestbranding=1"):n}catch(a){return n}},T=n=>n?n.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"",y=async()=>{try{if(_.value=null,history.state.materi)r.value=history.state.materi,await p(r.value.id);else{const n=x.params.id,a=await L(n);a&&(r.value=a,await p(n))}}catch(n){console.error("Error loading materi:",n),_.value=n.message||"Terjadi kesalahan saat memuat materi"}};return j(async()=>{await y()}),(n,a)=>(i(),b(e(z),null,{default:l(()=>[o(e(R),{class:"materi-content"},{default:l(()=>[!r.value&&!_.value?(i(),c("div",oa,[o(e(O),{name:"crescent",color:"primary"}),a[1]||(a[1]=t("p",null,"Memuat materi...",-1))])):_.value?(i(),c("div",na,[o(e(d),{icon:e(P),color:"danger",class:"error-icon"},null,8,["icon"]),a[3]||(a[3]=t("h3",null,"Gagal memuat materi",-1)),t("p",null,u(_.value),1),o(e(g),{onClick:y,fill:"outline"},{default:l(()=>a[2]||(a[2]=[m("Coba Lagi")])),_:1})])):r.value?(i(),c("div",sa,[t("div",{class:"hero-header",style:$({backgroundImage:"linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url("+r.value.image+")"})},[t("div",la,[t("h1",ia,u(r.value.name),1),t("div",ra,[o(e(w),{color:"light",class:"meta-badge"},{default:l(()=>[o(e(d),{icon:e(S),slot:"start"},null,8,["icon"]),m(" "+u(r.value.category),1)]),_:1}),o(e(w),{color:"warning",class:"meta-badge"},{default:l(()=>[o(e(d),{icon:e(V),slot:"start"},null,8,["icon"]),m(" Waktu Pengerjaan "+u(r.value.duration)+" menit ",1)]),_:1})])])],4),t("div",ca,[t("div",da,[t("div",ua,[o(e(d),{icon:e(A),color:"primary"},null,8,["icon"]),a[4]||(a[4]=t("h2",null,"Daftar Materi",-1))]),v.value.length>0?(i(),c("div",ma,[o(e(N),{class:"custom-accordion"},{default:l(()=>[(i(!0),c(q,null,E(v.value,s=>(i(),b(e(Y),{key:s.id,value:s.id},{default:l(()=>[o(e(J),{slot:"header",class:"accordion-header"},{default:l(()=>[o(e(d),{icon:e(Q),slot:"start",color:"medium"},null,8,["icon"]),o(e(Z),null,{default:l(()=>[m(u(s.judul),1)]),_:2},1024),o(e(d),{icon:e(aa),slot:"end",class:"accordion-icon"},null,8,["icon"])]),_:2},1024),t("div",_a,[t("div",va,[o(e(ea),{class:"author-avatar"},{default:l(()=>[t("img",{src:s.user_photo||"https://ionicframework.com/docs/img/demos/avatar.svg"},null,8,ha)]),_:2},1024),t("div",null,[t("p",fa,u(s.user_fullname),1),s.created_at?(i(),c("p",ga,"Dipublikasikan "+u(T(s.created_at)),1)):M("",!0)])]),s.link_video?(i(),c("div",pa,[t("div",ya,[t("iframe",{src:B(s.link_video),frameborder:"0",allowfullscreen:"",title:"Video Pembelajaran"},null,8,ka)]),o(e(g),{href:s.link_video,target:"_blank",fill:"clear",size:"small",class:"watch-button"},{default:l(()=>[o(e(d),{icon:e(ta),slot:"start"},null,8,["icon"]),a[5]||(a[5]=m(" Tonton di YouTube "))]),_:2},1032,["href"])])):M("",!0),t("div",{class:"materi-text",innerHTML:s.isi},null,8,ba)])]),_:2},1032,["value"]))),128))]),_:1})])):(i(),c("div",wa,[o(e(d),{icon:e(I),color:"medium"},null,8,["icon"]),a[6]||(a[6]=t("p",null,"Belum ada konten materi",-1))]))])])])):(i(),c("div",Ia,[o(e(d),{icon:e(I),color:"medium",class:"empty-icon"},null,8,["icon"]),a[8]||(a[8]=t("h3",null,"Materi tidak ditemukan",-1)),o(e(g),{onClick:a[0]||(a[0]=s=>n.$router.go(-1)),fill:"outline"},{default:l(()=>a[7]||(a[7]=[m("Kembali")])),_:1})]))]),_:1})]),_:1}))}},La=C(Da,[["__scopeId","data-v-7c6657f8"]]);export{La as default};
